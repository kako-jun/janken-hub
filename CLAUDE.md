# JankenHub (RPSHub) - å…¨ä½“å®Ÿè£…è¨ˆç”»

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**JankenHub**ï¼ˆã˜ã‚ƒã‚“ã‘ã‚“ãƒãƒ– / RPSHubï¼‰ã¯ã€ä¸–ç•Œä¸­ã®ã˜ã‚ƒã‚“ã‘ã‚“æ–‡åŒ–ã‚’é›†ç´„ã—ãŸã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾æˆ¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- ğŸŒ **ä¸–ç•Œã®ã˜ã‚ƒã‚“ã‘ã‚“**: å„å›½ãƒ»å„åœ°åŸŸã®ã˜ã‚ƒã‚“ã‘ã‚“ãƒ«ãƒ¼ãƒ«ã‚’ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çš„ã«ã‚µãƒãƒ¼ãƒˆ
- ğŸ¤– **NPCå¯¾æˆ¦**: ç¬¬ä¸€æ®µéšã¯ãƒ©ãƒ³ãƒ€ãƒ AIã¨ã®å¯¾æˆ¦ã§å„ãƒ«ãƒ¼ãƒ«ã‚’æ¥½ã—ã‚ã‚‹
- ğŸ² **å¤šæ§˜ãªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³**: é€šå¸¸ã˜ã‚ƒã‚“ã‘ã‚“ã‹ã‚‰éšæ®µã‚²ãƒ¼ãƒ ã€ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆã¾ã§
- ğŸ† **ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ **: ãƒã‚¤ãƒ³ãƒˆåˆ¶ã€ã‚³ã‚¤ãƒ³åˆ¶ã€ã‚´ãƒ¼ãƒ«åˆ¶ãªã©å¤šå½©ãªè©•ä¾¡æ–¹å¼
- ğŸŒ **å›½éš›å±•é–‹**: å¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªãƒ»è‹±èªï¼‰ã€å„ãƒ«ãƒ¼ãƒ«ã®æ–‡åŒ–ç´¹ä»‹

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React 18 + TypeScript + Tailwind CSS
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Vite
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: Flexbox + CSS Grid
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: Framer Motion
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: WebSocket
  - å°†æ¥çš„ã«P2På¯¾æˆ¦ã«æ‹¡å¼µ
- **çŠ¶æ…‹ç®¡ç†**: React Context API / Zustand (å¿…è¦ã«å¿œã˜ã¦)
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: LocalStorageï¼ˆæˆ¦ç¸¾ãƒ»ã‚¹ã‚³ã‚¢ä¿å­˜ï¼‰
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: FastAPI (Python 3.11+) + WebSocket
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**: uv (Backend) / npm (Frontend)
- **é–‹ç™ºç’°å¢ƒ**: Docker Compose
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: ESLint + Prettier + Husky

---

## å®Ÿè£…äºˆå®šã®ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«

### 1. Classic RPSï¼ˆé€šå¸¸ã˜ã‚ƒã‚“ã‘ã‚“ï¼‰
- ã‚°ãƒ¼ãƒ»ãƒãƒ§ã‚­ãƒ»ãƒ‘ãƒ¼ã®3æŠ
- å‹æ•—åˆ¤å®šï¼šã‚°ãƒ¼ > ãƒãƒ§ã‚­ > ãƒ‘ãƒ¼ > ã‚°ãƒ¼
- ãƒã‚¤ãƒ³ãƒˆåˆ¶ï¼ˆå…ˆã«3å‹ã§å‹åˆ©ãªã©ï¼‰

### 2. Achi Muite Hoiï¼ˆã‚ã£ã¡ã‚€ã„ã¦ãƒ›ã‚¤ï¼‰
1. ã˜ã‚ƒã‚“ã‘ã‚“ã§å‹æ•—ã‚’æ±ºå®š
2. å‹è€…ãŒã€Œä¸Šä¸‹å·¦å³ã€ã‚’é¸æŠ
3. è² è€…ã‚‚åŒæ™‚ã«ã€Œä¸Šä¸‹å·¦å³ã€ã‚’é¸æŠ
4. æ–¹å‘ãŒä¸€è‡´ã™ã‚Œã°å‹è€…ã®å‹åˆ©ã€ä¸ä¸€è‡´ãªã‚‰ç¶™ç¶š

### 3. Ido Jankenï¼ˆäº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“ï¼‰
- ã‚°ãƒ¼ãƒ»ãƒãƒ§ã‚­ãƒ»ãƒ‘ãƒ¼ãƒ»**äº•æˆ¸**ã®4æŠ
- å‹æ•—åˆ¤å®šï¼š
  - ã‚°ãƒ¼ > ãƒãƒ§ã‚­ã€ãƒ‘ãƒ¼
  - ãƒãƒ§ã‚­ > ãƒ‘ãƒ¼
  - ãƒ‘ãƒ¼ > ã‚°ãƒ¼
  - **äº•æˆ¸** > ã‚°ãƒ¼ï¼ˆäº•æˆ¸ã«è½ã¡ã‚‹ï¼‰ã€ãƒãƒ§ã‚­ï¼ˆäº•æˆ¸ã«è½ã¡ã‚‹ï¼‰
  - ãƒ‘ãƒ¼ > äº•æˆ¸ï¼ˆäº•æˆ¸ã«è“‹ã‚’ã™ã‚‹ï¼‰

### 4. Limited Jankenï¼ˆé™å®šã˜ã‚ƒã‚“ã‘ã‚“ï¼‰
- å„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯äº‹å‰ã«ã€Œã‚°ãƒ¼3å›ã€ãƒãƒ§ã‚­3å›ã€ãƒ‘ãƒ¼3å›ã€ãªã©å›æ•°åˆ¶é™
- ä½¿ã„åˆ‡ã£ãŸã‚‰ãã®æ‰‹ã¯ä½¿ãˆãªã„
- æˆ¦ç•¥æ€§ã®é«˜ã„ã˜ã‚ƒã‚“ã‘ã‚“

### 5. Arcade Coin Jankenï¼ˆãƒ¡ãƒ€ãƒ«ã‚²ãƒ¼ãƒ é¢¨ï¼‰
- å‹ã¤ã¨ä»®æƒ³ã‚³ã‚¤ãƒ³æ‰•ã„å‡ºã—ï¼ˆ+10ã‚³ã‚¤ãƒ³ï¼‰
- è² ã‘ã‚‹ã¨æ²¡åï¼ˆ-5ã‚³ã‚¤ãƒ³ï¼‰
- ã‚³ã‚¤ãƒ³0ã«ãªã£ãŸã‚‰ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼
- ç›®æ¨™ã‚³ã‚¤ãƒ³æ•°åˆ°é”ã§ã‚¯ãƒªã‚¢

### 6. Glicoãƒ»Chocolateãƒ»Pineapple éšæ®µã‚²ãƒ¼ãƒ 
- ã˜ã‚ƒã‚“ã‘ã‚“ã§å‹ã£ãŸã‚‰æ­©æ•°ã‚’é€²ã‚€
  - ã‚°ãƒ¼ï¼ˆã‚°ãƒªã‚³ï¼‰: 3æ­©
  - ãƒãƒ§ã‚­ï¼ˆãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆï¼‰: 6æ­©
  - ãƒ‘ãƒ¼ï¼ˆãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«ï¼‰: 10æ­©ï¼ˆâ€»è«¸èª¬ã‚ã‚Šï¼‰
- 30æ®µã®éšæ®µã‚’ã‚´ãƒ¼ãƒ«ç›®æŒ‡ã™
- **ã´ã£ãŸã‚Šã‚´ãƒ¼ãƒ«åˆ¶**: ã‚ªãƒ¼ãƒãƒ¼ã™ã‚‹ã¨ã‚¹ã‚¿ãƒ¼ãƒˆã«æˆ»ã‚‹

### 7. å¤§ã˜ã‚ƒã‚“ã‘ã‚“ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã˜ã‚ƒã‚“ã‘ã‚“ï¼‰
- å‚è€ƒ: https://adhd-tama.hatenablog.com/entry/2018/06/09/182449
- ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§è‡ªå‹•ã˜ã‚ƒã‚“ã‘ã‚“AIã‚’ä½œæˆ
- NPC vs NPC ã®è‡ªå‹•å¯¾æˆ¦ã‚’è¦³æˆ¦

### 8. ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆç”Ÿæˆæ©Ÿèƒ½
- Näººåˆ†ï¼ˆ2^näººï¼‰ã®ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨ã‚’è‡ªå‹•ç”Ÿæˆ
- ã˜ã‚ƒã‚“ã‘ã‚“né€£æˆ¦ã§å‹è€…ã‚’æ±ºå®š
- çµæœã‚’HTML/SVGã§è¡¨ç¤º
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è‡ªèº«ã‚‚ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆã«å‚åŠ å¯èƒ½

---

## NPCè¨­è¨ˆï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åæ¡ˆï¼‰

### Scissorsï¼ˆãƒãƒ§ã‚­ï¼‰ç³»
- **ãƒ¦ãƒªã‚¦ã‚¹ãƒ»ã‚·ã‚¶ãƒ¼** (Julius Scissor)
- **ã‚·ã‚¶ãƒ¼ãƒãƒ³ãƒ‰** (Scissorhands)
- **ã‚«ãƒƒãƒˆãƒãƒ³** (Cutman)
- **ãƒ–ãƒ¬ãƒ¼ãƒ‰å¿** (Lord Blade)
- **ãƒã‚µãƒŸä¾** (Samurai Scissor)

### Rockï¼ˆã‚°ãƒ¼ï¼‰ç³»
- **ãƒ­ãƒƒã‚­ãƒ¼ãƒ»ãƒãƒ«ãƒœã‚¢** (Rocky Balboaé¢¨)
- **ã‚¹ãƒˆãƒ¼ãƒ³ã‚¨ã‚¤ã‚¸** (Stone Age)
- **ã‚°ãƒ©ãƒ‹ãƒƒãƒˆä¼¯çˆµ** (Count Granite)
- **å²©æ‹³ç‹** (Rock Fist King)
- **ãƒšãƒ–ãƒ«ã‚º** (Pebblesï¼šå°çŸ³ã‚­ãƒ£ãƒ©)

### Paperï¼ˆãƒ‘ãƒ¼ï¼‰ç³»
- **ãƒšãƒ¼ãƒ‘ãƒ¼ãƒ»ã‚¿ã‚¤ã‚¬ãƒ¼** (Paper Tiger)
- **ãƒ‰ã‚¯ã‚¿ãƒ¼ãƒ»ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«** (Doctor Scroll)
- **æŠ˜ã‚Šç´™ãƒã‚¹ã‚¿ãƒ¼** (Origami Master)

---

## é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ§‹ç¯‰ï¼ˆWeek 1-2ï¼‰âœ…

#### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
janken-hub/
â”œâ”€â”€ backend/                   # FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPI ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ models.py         # Pydantic ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ websocket.py      # WebSocketç®¡ç†
â”‚   â”‚   â”œâ”€â”€ game_rules/       # ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py       # åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ classic_rps.py
â”‚   â”‚   â”‚   â”œâ”€â”€ achi_muite_hoi.py
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ npc/              # NPC AI
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ random_ai.py
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pyproject.toml
â”œâ”€â”€ frontend/                  # React + Vite ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ game/         # ã‚²ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ menu/         # ãƒ«ãƒ¼ãƒ«é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ npc/          # NPCè¡¨ç¤º
â”‚   â”‚   â”‚   â””â”€â”€ ui/           # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/            # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ websocketService.ts
â”‚   â”‚   â”‚   â””â”€â”€ gameService.ts
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ game.ts       # ã‚²ãƒ¼ãƒ å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ Dockerfile.dev
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ compose.yaml              # Docker Composeè¨­å®š
â”œâ”€â”€ CLAUDE.md                 # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ README.md
```

#### 1.2 å‹å®šç¾©ï¼ˆTypeScriptï¼‰

**`frontend/src/types/game.ts`**
```typescript
// ã˜ã‚ƒã‚“ã‘ã‚“ã®æ‰‹ï¼ˆåŸºæœ¬3ç¨®ï¼‰
export type Hand = 'rock' | 'paper' | 'scissors'

// äº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“ç”¨
export type IdoHand = Hand | 'well'

// ã‚ã£ã¡ã‚€ã„ã¦ãƒ›ã‚¤ã®æ–¹å‘
export type Direction = 'up' | 'down' | 'left' | 'right'

// ã˜ã‚ƒã‚“ã‘ã‚“ã®çµæœ
export type GameResult = 'win' | 'lose' | 'draw'

// ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—
export type GameRuleType =
  | 'classic_rps'
  | 'achi_muite_hoi'
  | 'ido_janken'
  | 'limited_janken'
  | 'arcade_coin'
  | 'glico_game'
  | 'tournament'

// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
export interface Player {
  id: string
  name: string
  isNPC: boolean
  hand?: Hand | IdoHand
  direction?: Direction // ã‚ã£ã¡ã‚€ã„ã¦ãƒ›ã‚¤ç”¨
}

// ã‚²ãƒ¼ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³
export interface GameSession {
  id: string
  ruleType: GameRuleType
  player1: Player
  player2: Player // NPC or Human
  currentRound: number
  result?: GameResult
  score: {
    player1: number
    player2: number
  }
  createdAt: string
}

// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çµ±è¨ˆ
export interface PlayerStats {
  wins: number
  losses: number
  draws: number
  totalGames: number
  winRate: number
}

// éšæ®µã‚²ãƒ¼ãƒ ç”¨
export interface GlicoGameState {
  player1Position: number
  player2Position: number
  goalPosition: number // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30
}

// ã‚³ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”¨
export interface CoinGameState {
  player1Coins: number
  player2Coins: number
  targetCoins: number
}

// é™å®šã˜ã‚ƒã‚“ã‘ã‚“ç”¨
export interface LimitedJankenState {
  player1Remaining: {
    rock: number
    paper: number
    scissors: number
  }
  player2Remaining: {
    rock: number
    paper: number
    scissors: number
  }
}
```

#### 1.3 Pydanticãƒ¢ãƒ‡ãƒ«ï¼ˆBackendï¼‰

**`backend/app/models.py`**
```python
from pydantic import BaseModel
from datetime import datetime
from typing import Optional, Literal

# ã˜ã‚ƒã‚“ã‘ã‚“ã®æ‰‹
Hand = Literal["rock", "paper", "scissors"]
IdoHand = Literal["rock", "paper", "scissors", "well"]
Direction = Literal["up", "down", "left", "right"]

# ã‚²ãƒ¼ãƒ çµæœ
GameResult = Literal["win", "lose", "draw"]

# ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—
GameRuleType = Literal[
    "classic_rps",
    "achi_muite_hoi",
    "ido_janken",
    "limited_janken",
    "arcade_coin",
    "glico_game",
    "tournament"
]

class Player(BaseModel):
    """ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼"""
    id: str
    name: str
    isNPC: bool
    hand: Optional[Hand | IdoHand] = None
    direction: Optional[Direction] = None

class GameSession(BaseModel):
    """ã‚²ãƒ¼ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³"""
    id: str
    ruleType: GameRuleType
    player1: Player
    player2: Player
    currentRound: int = 0
    result: Optional[GameResult] = None
    score: dict[str, int]
    createdAt: datetime

class PlayerStats(BaseModel):
    """ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çµ±è¨ˆ"""
    wins: int = 0
    losses: int = 0
    draws: int = 0
    totalGames: int = 0
    winRate: float = 0.0

class GlicoGameState(BaseModel):
    """éšæ®µã‚²ãƒ¼ãƒ çŠ¶æ…‹"""
    player1Position: int = 0
    player2Position: int = 0
    goalPosition: int = 30

class CoinGameState(BaseModel):
    """ã‚³ã‚¤ãƒ³ã‚²ãƒ¼ãƒ çŠ¶æ…‹"""
    player1Coins: int = 100
    player2Coins: int = 100
    targetCoins: int = 200

class LimitedJankenState(BaseModel):
    """é™å®šã˜ã‚ƒã‚“ã‘ã‚“çŠ¶æ…‹"""
    player1Remaining: dict[str, int]
    player2Remaining: dict[str, int]
```

---

### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆWeek 3-4ï¼‰

#### 2.1 åŸºåº•ã‚¯ãƒ©ã‚¹è¨­è¨ˆ

**`backend/app/game_rules/base.py`**
```python
from abc import ABC, abstractmethod
from ..models import Player, GameResult, Hand

class GameRuleBase(ABC):
    """ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã®åŸºåº•ã‚¯ãƒ©ã‚¹"""

    @abstractmethod
    def judge(self, player1: Player, player2: Player) -> GameResult:
        """å‹æ•—åˆ¤å®š"""
        pass

    @abstractmethod
    def get_rule_name(self) -> str:
        """ãƒ«ãƒ¼ãƒ«åã‚’å–å¾—"""
        pass

    @abstractmethod
    def get_description(self) -> str:
        """ãƒ«ãƒ¼ãƒ«èª¬æ˜ã‚’å–å¾—"""
        pass
```

#### 2.2 Classic RPSå®Ÿè£…

**`backend/app/game_rules/classic_rps.py`**
```python
from .base import GameRuleBase
from ..models import Player, GameResult, Hand

class ClassicRPS(GameRuleBase):
    """é€šå¸¸ã˜ã‚ƒã‚“ã‘ã‚“ãƒ«ãƒ¼ãƒ«"""

    def judge(self, player1: Player, player2: Player) -> GameResult:
        if player1.hand == player2.hand:
            return "draw"

        win_conditions = {
            ("rock", "scissors"),
            ("scissors", "paper"),
            ("paper", "rock"),
        }

        if (player1.hand, player2.hand) in win_conditions:
            return "win"
        else:
            return "lose"

    def get_rule_name(self) -> str:
        return "Classic Rock-Paper-Scissors"

    def get_description(self) -> str:
        return "Rock beats Scissors, Scissors beats Paper, Paper beats Rock"
```

#### 2.3 äº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“å®Ÿè£…

**`backend/app/game_rules/ido_janken.py`**
```python
from .base import GameRuleBase
from ..models import Player, GameResult, IdoHand

class IdoJanken(GameRuleBase):
    """äº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“ãƒ«ãƒ¼ãƒ«"""

    def judge(self, player1: Player, player2: Player) -> GameResult:
        h1, h2 = player1.hand, player2.hand

        if h1 == h2:
            return "draw"

        # äº•æˆ¸ã®ç‰¹æ®Šãƒ«ãƒ¼ãƒ«
        if h1 == "well":
            return "win" if h2 in ["rock", "scissors"] else "lose"
        if h2 == "well":
            return "lose" if h1 in ["rock", "scissors"] else "win"

        # é€šå¸¸ã®ã˜ã‚ƒã‚“ã‘ã‚“åˆ¤å®š
        win_conditions = {
            ("rock", "scissors"),
            ("scissors", "paper"),
            ("paper", "rock"),
        }

        return "win" if (h1, h2) in win_conditions else "lose"

    def get_rule_name(self) -> str:
        return "Ido Janken (äº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“)"

    def get_description(self) -> str:
        return "Rock/Scissors fall into Well, Paper covers Well"
```

---

### ãƒ•ã‚§ãƒ¼ã‚º3: NPC AIå®Ÿè£…ï¼ˆWeek 5ï¼‰

#### 3.1 ãƒ©ãƒ³ãƒ€ãƒ AI

**`backend/app/npc/random_ai.py`**
```python
import random
from ..models import Player, Hand, IdoHand, Direction

class RandomAI:
    """ãƒ©ãƒ³ãƒ€ãƒ ã«æ‰‹ã‚’é¸ã¶AI"""

    def __init__(self, npc_name: str):
        self.name = npc_name

    def choose_hand(self, rule_type: str) -> Hand | IdoHand:
        if rule_type == "ido_janken":
            return random.choice(["rock", "paper", "scissors", "well"])
        else:
            return random.choice(["rock", "paper", "scissors"])

    def choose_direction(self) -> Direction:
        """ã‚ã£ã¡ã‚€ã„ã¦ãƒ›ã‚¤ç”¨"""
        return random.choice(["up", "down", "left", "right"])
```

#### 3.2 é›£æ˜“åº¦åˆ¥AIï¼ˆå°†æ¥å®Ÿè£…ï¼‰

- **Easy**: å®Œå…¨ãƒ©ãƒ³ãƒ€ãƒ 
- **Normal**: ç¢ºç‡èª¿æ•´ï¼ˆãƒ‘ãƒ¼ã‚’å°‘ã—å¤šãå‡ºã™ãªã©ï¼‰
- **Hard**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å‚¾å‘ã‚’å­¦ç¿’ã—ã¦å¯¾ç­–

---

### ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆWeek 6-8ï¼‰

#### 4.1 ãƒ«ãƒ¼ãƒ«é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼

**`frontend/src/components/menu/RuleSelector.tsx`**
```tsx
import { GameRuleType } from '@/types/game'

interface Rule {
  id: GameRuleType
  name: string
  description: string
  icon: string
}

const RULES: Rule[] = [
  {
    id: 'classic_rps',
    name: 'Classic RPS',
    description: 'é€šå¸¸ã®ã˜ã‚ƒã‚“ã‘ã‚“',
    icon: 'âœŠâœ‹âœŒï¸',
  },
  {
    id: 'achi_muite_hoi',
    name: 'Achi Muite Hoi',
    description: 'ã‚ã£ã¡ã‚€ã„ã¦ãƒ›ã‚¤',
    icon: 'ğŸ‘†ğŸ‘‡ğŸ‘ˆğŸ‘‰',
  },
  {
    id: 'ido_janken',
    name: 'Ido Janken',
    description: 'äº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“',
    icon: 'ğŸª¨ğŸ“„âœ‚ï¸ğŸ•³ï¸',
  },
  // ... ä»–ã®ãƒ«ãƒ¼ãƒ«
]

export const RuleSelector = ({ onSelect }: { onSelect: (rule: GameRuleType) => void }) => {
  return (
    <div className="grid grid-cols-2 md:grid-cols-3 gap-4 p-6">
      {RULES.map(rule => (
        <button
          key={rule.id}
          onClick={() => onSelect(rule.id)}
          className="p-6 bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow"
        >
          <div className="text-4xl mb-2">{rule.icon}</div>
          <h3 className="text-lg font-bold">{rule.name}</h3>
          <p className="text-sm text-gray-600">{rule.description}</p>
        </button>
      ))}
    </div>
  )
}
```

#### 4.2 ã‚²ãƒ¼ãƒ ç”»é¢

**`frontend/src/components/game/GameBoard.tsx`**
```tsx
import { useState } from 'react'
import { Hand, GameSession, Player } from '@/types/game'

export const GameBoard = ({ session }: { session: GameSession }) => {
  const [selectedHand, setSelectedHand] = useState<Hand | null>(null)

  const handleHandSelect = (hand: Hand) => {
    setSelectedHand(hand)
    // WebSocketã§ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
    websocketService.send('PLAY_HAND', { sessionId: session.id, hand })
  }

  return (
    <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-500 to-purple-600">
      {/* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è¡¨ç¤º */}
      <div className="flex justify-between w-full max-w-4xl mb-8">
        <PlayerCard player={session.player1} />
        <div className="text-white text-2xl">VS</div>
        <PlayerCard player={session.player2} />
      </div>

      {/* ã‚¹ã‚³ã‚¢è¡¨ç¤º */}
      <div className="bg-white rounded-lg p-4 mb-8">
        <div className="text-2xl font-bold">
          {session.score.player1} - {session.score.player2}
        </div>
      </div>

      {/* æ‰‹é¸æŠãƒœã‚¿ãƒ³ */}
      <div className="flex gap-4">
        <HandButton hand="rock" emoji="âœŠ" onClick={handleHandSelect} />
        <HandButton hand="paper" emoji="âœ‹" onClick={handleHandSelect} />
        <HandButton hand="scissors" emoji="âœŒï¸" onClick={handleHandSelect} />
      </div>
    </div>
  )
}
```

---

### ãƒ•ã‚§ãƒ¼ã‚º5: éšæ®µã‚²ãƒ¼ãƒ å®Ÿè£…ï¼ˆWeek 9ï¼‰

#### 5.1 éšæ®µãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«

**`frontend/src/components/game/GlicoStaircase.tsx`**
```tsx
export const GlicoStaircase = ({ state }: { state: GlicoGameState }) => {
  return (
    <div className="relative w-full h-[600px] bg-gradient-to-b from-sky-200 to-green-200">
      {/* éšæ®µæç”» */}
      {Array.from({ length: state.goalPosition }).map((_, i) => (
        <div
          key={i}
          className="absolute border-2 border-gray-700 bg-yellow-600"
          style={{
            width: '60px',
            height: '40px',
            left: `${50 + (i % 2) * 40}px`,
            bottom: `${i * 20}px`,
          }}
        >
          {i + 1}
        </div>
      ))}

      {/* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã®ã‚³ãƒ */}
      <div
        className="absolute text-4xl transition-all duration-500"
        style={{
          left: '50px',
          bottom: `${state.player1Position * 20 + 40}px`,
        }}
      >
        ğŸƒ
      </div>

      {/* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2ã®ã‚³ãƒ */}
      <div
        className="absolute text-4xl transition-all duration-500"
        style={{
          left: '90px',
          bottom: `${state.player2Position * 20 + 40}px`,
        }}
      >
        ğŸ¤–
      </div>
    </div>
  )
}
```

---

### ãƒ•ã‚§ãƒ¼ã‚º6: ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ï¼ˆWeek 10-11ï¼‰

#### 6.1 ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆç”Ÿæˆ

**`backend/app/game_rules/tournament.py`**
```python
import math
from typing import List
from ..models import Player

class TournamentBracket:
    """ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨ç”Ÿæˆ"""

    def __init__(self, players: List[Player]):
        self.players = players
        self.rounds = []

    def generate_bracket(self):
        """ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨ã‚’ç”Ÿæˆ"""
        n = len(self.players)
        # 2ã®ã¹ãä¹—ã«åˆã‚ã›ã‚‹
        bracket_size = 2 ** math.ceil(math.log2(n))

        # ä¸è¶³åˆ†ã¯BYEï¼ˆä¸æˆ¦å‹ï¼‰
        bye_count = bracket_size - n

        # ... ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯
```

---

### ãƒ•ã‚§ãƒ¼ã‚º7: å›½éš›åŒ–å¯¾å¿œï¼ˆWeek 12ï¼‰

#### 7.1 å¤šè¨€èªå¯¾å¿œ

**`frontend/src/i18n/translations.ts`**
```typescript
export const translations = {
  en: {
    classic_rps: 'Classic Rock-Paper-Scissors',
    achi_muite_hoi: 'Direction Game',
    ido_janken: 'Well Janken',
    rock: 'Rock',
    paper: 'Paper',
    scissors: 'Scissors',
    well: 'Well',
  },
  ja: {
    classic_rps: 'é€šå¸¸ã˜ã‚ƒã‚“ã‘ã‚“',
    achi_muite_hoi: 'ã‚ã£ã¡ã‚€ã„ã¦ãƒ›ã‚¤',
    ido_janken: 'äº•æˆ¸ã˜ã‚ƒã‚“ã‘ã‚“',
    rock: 'ã‚°ãƒ¼',
    paper: 'ãƒ‘ãƒ¼',
    scissors: 'ãƒãƒ§ã‚­',
    well: 'äº•æˆ¸',
  },
}
```

---

## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

### Docker Composeä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
docker compose up

# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•
docker compose up -d

# ãƒ­ã‚°ç¢ºèª
docker compose logs -f

# åœæ­¢
docker compose down
```

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºï¼ˆDockerãªã—ï¼‰
```bash
# Backend
cd backend
uv sync
source .venv/bin/activate  # Windows: .venv\Scripts\activate
uvicorn app.main:app --reload --port 8080

# Frontend
cd frontend
npm install
npm run dev
```

### ã‚¢ã‚¯ã‚»ã‚¹URL
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:8080
- **API Docs**: http://localhost:8080/docs
- **WebSocket**: ws://localhost:8080/ws

---

## ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ä¸»è¦æˆæœç‰© |
|---------|------|----------|
| 1 | Week 1-2 | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã€å‹å®šç¾©ã€WebSocketåŸºç›¤ âœ… |
| 2 | Week 3-4 | ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆClassic RPS, Ido Jankenï¼‰ |
| 3 | Week 5 | NPC AIå®Ÿè£…ï¼ˆãƒ©ãƒ³ãƒ€ãƒ AIï¼‰ |
| 4 | Week 6-8 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆãƒ«ãƒ¼ãƒ«é¸æŠã€ã‚²ãƒ¼ãƒ ç”»é¢ï¼‰ |
| 5 | Week 9 | éšæ®µã‚²ãƒ¼ãƒ å®Ÿè£… |
| 6 | Week 10-11 | ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ |
| 7 | Week 12 | å›½éš›åŒ–å¯¾å¿œã€å¤šè¨€èª |
| 8 | Week 13-14 | ãƒ‡ãƒ—ãƒ­ã‚¤ã€æœ€é©åŒ– |

---

## å°†æ¥æ‹¡å¼µ

### ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾æˆ¦ï¼ˆP2P / ãƒãƒƒãƒãƒ³ã‚°ï¼‰
- WebSocketã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯¾æˆ¦
- ãƒãƒƒãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ•ãƒ¬ãƒ³ãƒ‰å¯¾æˆ¦

### ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿ãƒ«ãƒ¼ãƒ«
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§æ–°ã—ã„ã˜ã‚ƒã‚“ã‘ã‚“ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ 
- ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆJSONå½¢å¼ã§å®šç¾©ï¼‰

### ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- ãƒ«ãƒ¼ãƒ«åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- æœˆé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°

### å¤§å°†æ£‹ãƒ¢ãƒ¼ãƒ‰
- ã˜ã‚ƒã‚“ã‘ã‚“è¦ç´ ã‚’å–ã‚Šå…¥ã‚ŒãŸå°†æ£‹é¢¨ã‚²ãƒ¼ãƒ 
- é§’ã®å¼·ã•ã‚’ã˜ã‚ƒã‚“ã‘ã‚“ã§æ±ºå®š

---

## ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

âœ… **å®Œäº†**
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ï¼ˆbackend + frontendï¼‰
- Docker Composeç’°å¢ƒ
- FastAPI + WebSocketåŸºç›¤
- React + TypeScriptç’°å¢ƒ
- åŸºæœ¬çš„ãªå‹å®šç¾©ï¼ˆHand, GameResult, Player, GameSessionï¼‰
- WebSocketã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆå†æ¥ç¶šãƒ­ã‚¸ãƒƒã‚¯ä»˜ãï¼‰

âš ï¸ **ä¸€éƒ¨å®Œäº†**
- å‹å®šç¾©ï¼ˆæ‹¡å¼µãŒå¿…è¦ï¼‰

âŒ **æœªå®Ÿè£…**
- ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
- NPC AI
- UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ«ãƒ¼ãƒ«é¸æŠã€ã‚²ãƒ¼ãƒ ç”»é¢ï¼‰
- ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
- éšæ®µã‚²ãƒ¼ãƒ 
- ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

---

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. **å‹å®šç¾©ã®æ‹¡å¼µ** (`frontend/src/types/game.ts` ã‚’æ›´æ–°)
2. **ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ã®å®Ÿè£…é–‹å§‹** (`backend/app/game_rules/`)
3. **ãƒ«ãƒ¼ãƒ«é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ä½œæˆ** (`frontend/src/components/menu/RuleSelector.tsx`)
4. **Classic RPSã®å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆ**

æº–å‚™ãŒã§ããŸã‚‰ã€å…·ä½“çš„ãªå®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼
